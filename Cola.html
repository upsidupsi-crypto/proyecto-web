<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cola</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <a href="Proyecto.html">Inicio</a> |
        <a href="Pila.html">Pila</a> |
        <a href="Cola.html">Cola</a> |
        <a href="Lista.html">Lista Enlazada</a>
    </nav>
    <h1>Cola (Queue)</h1>
    
    <div class="control-section">
        <input type="text" id="inputCola" placeholder="Ingrese un número">
        <button onclick="app.encolar()">Encolar (Enqueue)</button>
        <button onclick="app.desencolar()">Desencolar (Dequeue)</button>
        <p id="mensaje"></p>
    </div>

    <div class="content-container">
        <div class="visualization-container">
            <h3>Visualización:</h3>
            <div id="lienzo" data-structure="cola">La cola está vacía</div>
        </div>

        <div class="code-container">
            <h3>Código C:</h3>
            <pre id="codigoDisplay">Seleccione una operación...</pre>
        </div>
    </div>

    <script>
        const CODIGO_C = {
            encolar: `typedef struct Nodo {
    int dato;
    struct Nodo* siguiente;
} Nodo;

void encolar(Cola* c, int dato) {
    Nodo* nuevoNodo = (Nodo*)malloc(sizeof(Nodo));
    nuevoNodo->dato = dato;
    nuevoNodo->siguiente = NULL;
    if (c->final == NULL) {
        c->frente = c->final = nuevoNodo;
    } else {
        c->final->siguiente = nuevoNodo;
        c->final = nuevoNodo;
    }
}`,
            desencolar: `int desencolar(Cola* c) {
    if (c->frente == NULL) return -1;
    Nodo* temporal = c->frente;
    int dato = temporal->dato;
    c->frente = c->frente->siguiente;
    if (c->frente == NULL) c->final = NULL;
    free(temporal);
    return dato;
}`
        };

        const app = {
            datos: [], 

            /**
             * Función para agregar elementos a la cola (Enqueue).
             * Obtiene el valor, valida que sea número, lo agrega al final del arreglo,
             * actualiza la interfaz gráfica y muestra el código C correspondiente.
             */
            encolar() {
                const input = document.getElementById('inputCola');
                const val = input.value.trim();
                if (!val || isNaN(val)) return alert("Ingrese un número");
                
                this.datos.push(val);
                this.render();
                this.mostrarCodigo(CODIGO_C.encolar);
                this.mensaje(`Encolado: ${val}`);
                input.value = '';
                input.focus();
            },

            /**
             * Función para retirar elementos de la cola (Dequeue).
             * Verifica si está vacía, remueve el primer elemento del arreglo (FIFO),
             * actualiza la vista y muestra el código C.
             */
            desencolar() {
                if (this.datos.length === 0) return this.mensaje('Cola vacía');
                const val = this.datos.shift(); // Remueve del inicio (izquierda)
                this.render();
                this.mostrarCodigo(CODIGO_C.desencolar);
                this.mensaje(`Desencolado: ${val}`);
            },

            /**
             * Dibuja visualmente la cola en el contenedor 'lienzo'.
             * Limpia el HTML actual e itera sobre los datos creando divs cuadrados para cada elemento.
             * Los elementos se agregan en orden de llegada.
             */
            render() {
                const div = document.getElementById('lienzo');
                div.innerHTML = '';
                if (this.datos.length === 0) {
                    div.innerHTML = 'Vacía';
                    return;
                }
                this.datos.forEach(d => {
                    const nodo = document.createElement('div');
                    nodo.style.border = "1px solid black";
                    nodo.style.padding = "5px";
                    nodo.className = 'nodo-entrada';
                    nodo.textContent = d;
                    div.appendChild(nodo);
                });
            },

            // Función auxiliar para inyectar el texto del código C en la etiqueta <pre>
            mostrarCodigo(txt) {
                document.getElementById('codigoDisplay').innerHTML = txt.replace(/\n/g, '<br>').replace(/ /g, '&nbsp;');
            },
            
            // Función auxiliar para mostrar mensajes temporales de estado
            mensaje(txt) {
                document.getElementById('mensaje').textContent = txt;
            }
        };
    </script>
</body>
</html>